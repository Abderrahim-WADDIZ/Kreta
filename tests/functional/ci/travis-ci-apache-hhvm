# This file is part of the Kreta package.
#
# (c) Beñat Espiña <benatespina@gmail.com>
# (c) Gorka Laucirica <gorka.lauzirika@gmail.com>
#
# For the full copyright and license information, please view the LICENSE
# file that was distributed with this source code.

Listen 8000

<VirtualHost *:8000>
  DocumentRoot %TRAVIS_BUILD_DIR%/tests/functional/fixtures/web
  ServerName kreta.test

  ErrorLog "%TRAVIS_BUILD_DIR%/apache_error.log"
  CustomLog "%TRAVIS_BUILD_DIR%/apache_access.log" combined

  <Directory "%TRAVIS_BUILD_DIR%/tests/functional/fixtures/web">
    Options FollowSymLinks MultiViews ExecCGI
    AllowOverride All
    Order deny,allow
    Allow from all
  </Directory>

  <IfModule mod_fastcgi.c>
    <FilesMatch \.php$>
      SetHandler hhvm-php-extension
    </FilesMatch>
    Alias /hhvm /hhvm
    Action hhvm-php-extension /hhvm virtual
    FastCgiExternalServer /hhvm -host 127.0.0.1:9000 -pass-header Authorization
  </IfModule>

</VirtualHost>
