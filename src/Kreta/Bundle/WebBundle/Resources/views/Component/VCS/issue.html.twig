{% extends 'KretaWebBundle:blocks:widget.html.twig' %}

{% block widgetClass %}{% endblock %}

{% block widgetIcon %}fa-folder-open-o{% endblock %}

{% block widgetTitle %}VCS Integration{% endblock %}

{% block widgetContent %}
    <div class="kreta-issue-vcs">
        <div class="vcs-section">
            <h4><i class="fa fa-github"></i>Repository</h4>
            {% for repository in repositories %}
                <p><a href="{{ repository.url }}">{{ repository.name }}</a></p>
            {% else %}
                <p>No repositories found for this issue</p>
            {% endfor %}
        </div>
        <div class="vcs-section">
            <h4><i class="fa fa-code-fork"></i>Branches</h4>
            {% for branch in branches %}
                <p><a href="{{ branch.url }}">{{ branch.name }}</a></p>
            {% else %}
                <p>No branches found for this issue</p>
            {% endfor %}
        </div>
        <div class="vcs-section">
            <h4><i class="fa fa-code"></i>Commits</h4>
            {% for commit in commits %}
                <p><a href="{{ commit.url }}">{{ commit.sha | slice(0, 10)}}</a> - {{ commit.message }}</p>
            {% else %}
                <p>No commits found for this issue</p>
            {% endfor %}
        </div>
    </div>
{% endblock %}
